// ZxDialog 对话框组件样式
// 纯净组件样式，充分利用 Element Plus 的品牌色 CSS3 变量

// 导入变量定义
@import './var.scss';

// 全局对话框样式 - 支持拖拽 transform
.zx-dialog.el-dialog {
  // 支持通过 CSS 变量控制拖拽位移
  transform: var(--zx-dialog-transform, none);
  will-change: transform;
  transition: box-shadow 0.2s ease;

  // 拖拽时的增强阴影效果
  &[style*='--zx-dialog-transform: translate3d'] {
    box-shadow:
      0 20px 40px rgba(0, 0, 0, 0.15),
      0 8px 24px rgba(0, 0, 0, 0.1),
      var(--cmp-dialog-box-shadow);
    z-index: 2001; // 确保在拖拽时层级最高
  }
}

// 所有样式包装在 modal-class 下
.zx-dialog-modal {
  // 对话框容器样式
  .zx-dialog {
    // Element Plus 对话框基础样式覆盖
    &.el-dialog {
      padding: 0;
      border-radius: var(--cmp-dialog-border-radius);
      box-shadow: var(--cmp-dialog-box-shadow);
      background-color: var(--cmp-dialog-body-bg);
      border: 1px solid var(--cmp-dialog-border-color);

      // 对话框头部
      .el-dialog__header {
        background-color: var(--cmp-dialog-header-bg);
        border-radius: var(--cmp-dialog-border-radius) var(--cmp-dialog-border-radius) 0 0;
        border-bottom: 1px solid var(--cmp-dialog-border-color);
        padding: var(--cmp-dialog-header-padding);
        margin: 0;
        cursor: move;
        user-select: none;
        transition:
          background-color 0.2s ease,
          opacity 0.2s ease;

        &:hover {
          background-color: var(--el-fill-color-light, rgba(0, 0, 0, 0.02));
        }

        // 拖拽激活状态
        &.dragging {
          background-color: var(--el-fill-color, rgba(0, 0, 0, 0.06)) !important;
          opacity: 0.8;
        }

        .el-dialog__title {
          color: var(--cmp-dialog-text-color);
          font-weight: 600;
          font-size: 16px;
        }

        .el-dialog__headerbtn {
          background-color: transparent;
          .el-dialog__close {
            color: var(--cmp-dialog-text-secondary);
            font-size: 18px;

            &:hover {
              color: var(--cmp-dialog-hover-color);
            }
          }
        }
      }

      // 对话框内容
      .el-dialog__body {
        background-color: var(--cmp-dialog-body-bg);
        color: var(--cmp-dialog-text-color);
        padding: var(--cmp-dialog-body-padding);
        max-height: 60vh;
        overflow-y: auto;

        // 自定义滚动条
        &::-webkit-scrollbar {
          width: 6px;
        }

        &::-webkit-scrollbar-track {
          background: var(--cmp-dialog-scrollbar-track);
          border-radius: 3px;
        }

        &::-webkit-scrollbar-thumb {
          background: var(--cmp-dialog-scrollbar-thumb);
          border-radius: 3px;

          &:hover {
            background: var(--cmp-dialog-scrollbar-thumb-hover);
          }
        }
      }

      // 对话框底部
      .el-dialog__footer {
        background-color: var(--cmp-dialog-footer-bg);
        border-radius: 0 0 var(--cmp-dialog-border-radius) var(--cmp-dialog-border-radius);
        border-top: 1px solid var(--cmp-dialog-border-color);
        padding: var(--cmp-dialog-footer-padding);
        text-align: right;

        .el-button + .el-button {
          margin-left: 12px;
        }
      }
    }

    // 不同尺寸适配
    &.zx-dialog-small .el-dialog {
      width: 400px;
      min-width: 400px;
      padding: 0;
    }

    &.zx-dialog-large .el-dialog {
      width: 800px;
      min-width: 800px;
      padding: 0;
    }

    // 无遮罩样式
    &.zx-dialog-no-mask {
      .el-dialog {
        box-shadow:
          var(--cmp-dialog-box-shadow),
          0 0 0 1px var(--cmp-dialog-border-color);
      }
    }

    // 无内容内边距
    &.zx-dialog-no-content-padding .el-dialog__body {
      padding: 0;
    }

    // 无标题样式
    &.zx-dialog-no-title .el-dialog__header {
      display: none;
    }

    // 响应式设计
    @media (max-width: 768px) {
      &.zx-dialog-small .el-dialog,
      &.zx-dialog-large .el-dialog {
        width: 90vw !important;
        min-width: 300px !important;
        margin: 5vh auto !important;
      }

      .el-dialog__body {
        max-height: 50vh;
      }
    }
  }

  // 对话框内容区域
  .zx-dialog-body {
    // 描述列表样式优化
    .el-descriptions {
      .el-descriptions__header {
        margin-bottom: 16px;
      }

      .el-descriptions__body {
        .el-descriptions__table {
          .el-descriptions__cell {
            &.el-descriptions__label {
              background-color: var(--cmp-dialog-descriptions-label-bg);
              color: var(--cmp-dialog-text-color);
              font-weight: 500;
              width: 120px;
              min-width: 120px;
            }

            &.el-descriptions__content {
              color: var(--cmp-dialog-text-color);
              word-break: break-all;
            }
          }
        }
      }
    }
  }
}

// 全局样式（确保兼容性）
.zx-dialog {
  .el-dialog {
    border-radius: 8px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }
}

// 文本处理类
.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.overflow-hidden {
  overflow: hidden;
}

// 文本颜色类（使用项目的 CSS 变量）
.text-\[rgb\(var\(--el-color-primary\)\)\] {
  color: rgb(var(--el-color-primary));
}
