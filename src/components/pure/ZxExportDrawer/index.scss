// ZxExportDrawer 组件样式
// 纯净组件样式，充分利用 Element Plus 的品牌色 CSS3 变量

// 导入变量定义
@import './var.scss';

.zx-export-drawer {
  .el-drawer__body {
    overflow: hidden !important;
  }
  .export-drawer-content {
    display: flex;
    gap: var(--cmp-export-drawer-content-gap);
    height: var(--cmp-export-drawer-content-height);
    padding: var(--cmp-export-drawer-content-padding);

    .config-panel,
    .selected-panel {
      flex: 1;
      border: var(--cmp-export-drawer-panel-border);
      border-radius: var(--cmp-export-drawer-panel-border-radius);
      overflow: hidden;
      display: flex;
      flex-direction: column;

      .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--cmp-export-drawer-panel-header-padding);
        height: var(--cmp-export-drawer-panel-header-height);
        background-color: var(--cmp-export-drawer-panel-header-bg);
        border-bottom: var(--cmp-export-drawer-panel-header-border);
        flex-shrink: 0; // 防止header被压缩

        .panel-title {
          font-weight: var(--cmp-export-drawer-panel-title-font-weight);
          color: var(--cmp-export-drawer-panel-title-color);
        }
      }
    }

    .optional-fields {
      padding: var(--cmp-export-drawer-optional-padding);
      flex: 1; // 占据剩余空间
      overflow-y: auto;

      .field-item {
        padding: var(--cmp-export-drawer-field-item-padding);
        cursor: pointer;
        transition: var(--cmp-export-drawer-transition-bg);
        border-radius: 4px;
        margin-bottom: 2px;

        &:hover {
          background-color: var(--cmp-export-drawer-field-item-hover-bg);
        }

        &.selected {
          background-color: var(--cmp-export-drawer-field-item-selected-bg);
        }

        // 确保 checkbox 不会阻止点击事件
        .el-checkbox {
          pointer-events: none;
          width: 100%;

          .el-checkbox__input {
            pointer-events: auto;
          }

          .el-checkbox__label {
            pointer-events: none;
          }
        }
      }
    }

    .selected-fields {
      padding: var(--cmp-export-drawer-selected-padding);
      flex: 1; // 占据剩余空间
      overflow-y: auto;

      .selected-field-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--cmp-export-drawer-selected-item-padding);
        margin: var(--cmp-export-drawer-selected-item-margin);
        background-color: var(--cmp-export-drawer-selected-item-bg);
        border-radius: var(--cmp-export-drawer-selected-item-border-radius);

        .field-label {
          color: var(--cmp-export-drawer-selected-label-color);
        }
      }
    }

    .empty-state {
      padding: var(--cmp-export-drawer-empty-padding);
      text-align: center;
    }
  }

  .drawer-footer {
    display: flex;
    justify-content: flex-end;
    gap: var(--cmp-export-drawer-footer-gap);
    padding: var(--cmp-export-drawer-footer-padding);
  }
}

// 单行文本省略
.single-line {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// 原有样式保留（使用新的 CSS 变量）
.panel-wrapper {
  display: flex;
  width: 100%;
  height: calc(100vh - 112px);
  flex-flow: row nowrap;

  .inner-wrapper {
    display: flex;
    overflow: hidden;
    width: 100%;
    height: calc(100vh - 112px);
    border: 1px solid var(--color-text-n8);

    // 可选字段
    .optional-field {
      flex-grow: 1;
      height: 100%;
      border-right: 1px solid var(--color-text-n8);
    }

    .optional-header {
      padding: 0 16px;
      height: 54px;
      color: var(--color-text-3);
      background: var(--color-text-n9);
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
    }

    .selected-panel {
      height: calc(100vh - 152px);
      overflow-y: auto;
    }
  }
}

.ghost {
  border: 1px dashed rgba(var(--primary-5));
  background-color: rgba(var(--primary-1));
}

.footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: auto -16px -16px;
  padding: var(--cmp-export-drawer-footer-gap) 16px;
  box-shadow: 0 -1px 4px 0 rgb(31 35 41 / 10%);
}

.one-line-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
